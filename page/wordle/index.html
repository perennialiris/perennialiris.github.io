<!DOCTYPE html>
<html lang="en">
<head>
    <title>Wordle helper</title>
    <link rel="stylesheet" href="../../assets/main.css">
    <link rel="icon" type="image/x-icon" href="../../favicon.ico">
    <style>
    #display {
        width: 100%;
        min-height: 3em;
        display: flex;
        gap: 6px;
        justify-content: center;
        align-items: flex-start;
        flex-wrap: wrap;
    }
        #display code {
            padding: 5px 6px 3px;
            border-bottom: 1px solid var(--grey-a);
            border-right: 1px solid var(--grey-a);
        }
    </style>
</head>
<body>
### Wordle helper

This is a partial-cheater script for [Wordle](https://nytimes.com/games/wordle). This doesn't connect to a dictionary or help you find words. It just shows every logically possible combination of letters based on your input.

To record that 'K' has to be in the 3rd slot, write "k3" in the required box, and likewise for the forbidden (yellow letters).

||table this { margin-inline: auto; }
Letters: | <input id="letters" maxlength="5">|
Forbidden: | <input id="forbidden">|
Required: | <input id="required">|
|<input type="button" id="run-helper" value="Run" class="flat-button" style="float: right">|

\<div id="display"></div>


<script src="../../assets/layout.js"></script>
<script>
const wordLength = 5;
const rFilter = new RegExp("[^a-z" + (wordLength > 9 ? 0 : 1) + "-" + wordLength + " ]", "g");

let letters = [];
let forbidden = [];
let required = [];

function foo(word, letter) {
    let out = [];
    for (let i = 0; i < wordLength; i += 1) {
        if (word[i] == "." && !forbidden[i].includes(letter)) {
            let temp = word.slice(0, i) + letter + word.slice(i + 1)
            out.push(temp);
        }
    }
    return out;
}

function runScript() {
        required = [];
        forbidden = [];
        while (forbidden.length < wordLength) {
            forbidden.push([]);
        }
        while (required.length < wordLength) {
            required.push("");
        }
        
        letters = document.getElementById("letters").value.toLowerCase().replace(/[^a-z]/g, "").substring(0, wordLength).split("");
        console.log("Letters input: " + letters.join(" "))

        let ftemp = document.getElementById("forbidden").value.toLowerCase().replace(rFilter, "").split(" ");
        console.log(ftemp)
        ftemp.forEach(letterNumPair => {
            if (letterNumPair.length != 2) {
                return;
            }
            console.log(letterNumPair)
            let letter = letterNumPair[0];
            let num = parseInt(letterNumPair[1]) - 1;
            if (!forbidden[num].includes(letter)) {
                forbidden[num].push(letter);
            }
        })
        //console.log(forbidden)

        document.getElementById("required").value
        .toLowerCase().replace(rFilter, "").split(" ").map(letterNumPair => {
            if (letterNumPair.length != 2) {
                return;
            }
            let letter = letterNumPair[0];
            let num = parseInt(letterNumPair[1]) - 1;
            if (!required[num].includes(letter)) {
                if (required[num] != "") {
                    console.error("Error");
                }
                required[num] = letter;
            }
        })
        
        let results = [ ".".repeat(wordLength) ];
        for (let i = 0; i < letters.length; i += 1) {
            results = results.map(x => foo(x, letters[i])).flat(1);
        }
        for (let i = 0; i < letters.length; i += 1) {
            if (required[i] != "") {
                results = results.filter(w => required[i] == w[i]);
            }
        }
        document.getElementById("display").innerHTML = results.map(w => `<code>${ w }</code>` ).join("");
}

window.addEventListener("load", function() {
    document.getElementById("run-helper").addEventListener("click", runScript);
    document.getElementById("letters").addEventListener("keydown", function(e) { if (e.key == "Enter") { runScript(); } })
    document.getElementById("forbidden").addEventListener("keydown", function(e) { if (e.key == "Enter") { runScript(); } })
    document.getElementById("required").addEventListener("keydown", function(e) { if (e.key == "Enter") { runScript(); } })
})



</script>
</body></html>
